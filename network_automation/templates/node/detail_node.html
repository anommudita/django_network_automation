{% extends 'main.html' %}
{% load static %}

{% block content %}

<!-- main konten -->


    <!-- flash message -->
        {% for message in messages %}
        <div class="container-fluid p-0">

            <div class="alert {{ message.tags }} alert-dismissible fade show col-6" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        </div>
        {% endfor %}
    <!-- end flash message -->
    
    <div class="d-flex justify-content-end pt-3">
        <a href="#" data-bs-toggle="modal" data-bs-target="#addContainer" class="btn btn-primary">Add Container</a>
        <div>&nbsp;&nbsp;</div>
        <a href="#" data-bs-toggle="modal" data-bs-target="#addVirtualMachine" class="btn btn-success ml-2">Add Virtual Machine</a>
    </div>


    {% if container is None %}
        <div class="col-12 col-lg-12 col-xxl-12 order-xxl-4 pt-3">
            <div class="card flex-fill ">
                <div class="card-body d-flex align-items-center" style="height: 300px;">
                    <h1 class="text-center mx-auto">Container is Empty</h1>
                </div>
            </div>
        </div>
    {% else  %}
        <!-- Container -->
        <H3>Container</H3>
        <div class="row">
        <!-- container -->
        {% for row in container %}
            <div class="col-12 col-md-6 col-xxl-3 d-flex order-2 order-xxl-3">
                <div class="card flex-fill w-100">
                    <div class="d-flex justify-content-end">
                        <a href="/detail-container/{{row.vmid}}" class="btn btn-primary mt-3">Detail</a>
                        <div>
                            &nbsp; &nbsp; &nbsp;
                        </div>
                    </div>


                    <div class="card-header">
                        <h5 class="card-title mb-0 pb-2">{{row.name}}</h5>
                        {% if row.status == "stopped"%}
                            <span class="badge bg-danger">Stopped</span>
                        {% else %}
                            <span class="badge bg-success">Running</span>
                        {% endif %}

                    </div>

                    <div class="py-3 mx-auto">
                        <div class="chart chart-xs">
                            <i class="align-middle me-1" data-feather="box" style="width: 180px; height: 180px;"></i>
                        </div>
                    </div>

                    <div class="card-body d-flex">
                        <div class="align-self-center w-100">
                            <table class="table mb-0">
                                <tbody>
                                    <p id="">Data akan ditampilkan di sini</p>
                                    <tr>
                                        <td>CPU</td>
                                        <td class="text-end" id="cpu"></td>
                                    </tr>
                                    <tr>
                                        <td>Memori</td>
                                        <td class="text-end" id="memori"></td>

                                    </tr>
                                    <tr>
                                        <td>Storage</td>
                                        <td class="text-end" id="disk"></td>
                                    </tr>
                                </tbody>
                            </table>

                            <div class=" pt-3">
                                <div class="text-center mt-2">
                                    <a href="/start-container/{{id_node}}/{{row.vmid}}" class="btn btn-success mr-3 start-container">Start</a>
                                    <a href="/stop-container/{{id_node}}/{{row.vmid}}" class="btn btn-warning mr-3 stop-container">Stop</a>
                                    <a href="/reboot-container/{{id_node}}/{{row.vmid}}" class="btn btn-primary mr-3 reboot-container">Reboot</a>
                                </div>

                                <div class="text-center">
                                    <a href="/remove-container/{{id_node}}//{{row.vmid}}" class="btn btn-danger mt-3 text remove-container">Remove</a>
                                </div>
                            </div>
                            
                        </div>
                    </div>
                    
                </div>
            </div>
        {% endfor%}  
        

        </div>


    {% endif %}
    

    {% if virtual_machine is None %}
        <div class="col-12 col-lg-12 col-xxl-12 order-xxl-4">
            <div class="card flex-fill ">
                <div class="card-body d-flex align-items-center" style="height: 300px;">
                    <h1 class="text-center mx-auto">Virtual Machine is Empty</h1>
                </div>
            </div>
        </div>

    {% else  %}
        <!-- Virtual Machine -->
        <H3>Virtual Machine</H3>
        {% for row in virtual_machine %}
            <div class="col-12 col-md-6 col-xxl-3 d-flex order-2 order-xxl-3">
                <div class="card flex-fill w-100">

                    <div class="d-flex justify-content-end">
                        <a href="/detail-virtual_machine/{{row.vmid}}" class="btn btn-primary mt-3">Detail</a>
                        <div>
                            &nbsp; &nbsp; &nbsp;
                        </div>
                    </div>

                    <div class="card-header">
                        <h5 class="card-title mb-0 pb-2">{{row.name}}</h5>
                        {% if row.status == "stopped"%}
                            <span class="badge bg-danger">Stopped</span>
                        {% else %}
                            <span class="badge bg-success">Running</span>
                        {% endif %}

                    </div>

                    <div class="py-3 mx-auto">
                        <div class="chart chart-xs">
                            <i class="align-middle me-1" data-feather="airplay" style="width: 180px; height: 180px;"></i>
                        </div>
                    </div>

                    <div class="card-body d-flex">
                        <div class="align-self-center w-100">

                            <table class="table mb-0">
                                <tbody>
                                    <p id="">Data akan ditampilkan di sini</p>
                                    <tr>
                                        <td>CPU</td>
                                        <td class="text-end" id="cpu"></td>
                                    </tr>
                                    <tr>
                                        <td>Memori</td>
                                        <td class="text-end" id="memori"></td>

                                    </tr>
                                    <tr>
                                        <td>Storage</td>
                                        <td class="text-end" id="disk"></td>
                                    </tr>
                                </tbody>
                            </table>

                            <div class=" pt-3">
                                <div class="text-center mt-2">
                                    <a href="/start-virtual_machine/{{id_node}}/{{row.vmid}}" class="btn btn-success mr-3 start-virtual_machine">Start</a>
                                    <a href="/stop-virtual_machine/{{id_node}}/{{row.vmid}}" class="btn btn-warning mr-3 stop-virtual_machine">Stop</a>
                                    <a href="/reboot-virtual_machine/{{id_node}}/{{row.vmid}}" class="btn btn-primary mr-3 reboot-virtual_machine">Reboot</a>
                                </div>

                                <div class="text-center">
                                    <a href="/remove-virtual_machine/{{id_node}}//{{row.vmid}}" class="btn btn-danger mt-3 text remove-virtual_machine">Remove</a>
                                </div>

                                
                            </div>
                            
                        </div>
                    </div>
                    
                </div>
            </div>
        {% endfor%}  
        
    {% endif%}

        <!-- modalbox tambah Container -->
        <div class="modal fade" id="addContainer" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="card bg-white border-0 mb-0">
                            <div class="card-header bg-transparent">
                                <h2 class="card-heading text-center">Add Container</h2>
                            </div>
                            <div class="card-body">
                                <form action="/adduser" id="addFormUser" method="post">
                                    {% csrf_token %}

                                    <!-- First Name-->
                                    <div class="form-group mb-4">
                                        <div class="input-group input-group-merge input-group-alternative">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fa-solid fa-id-card fa-2x "></i></span>
                                            </div>
                                            <input class="form-control" name="firstname" id="firstname" placeholder="Enter First Name" type="text" autocomplete="off" value="">
                                        </div>
                                    </div>

                                    <!-- Last Name-->
                                    <div class="form-group mb-4">
                                        <div class="input-group input-group-merge input-group-alternative">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fa-solid fa-id-card fa-2x "></i></span>
                                            </div>
                                            <input class="form-control" name="lastname" id="lastname" placeholder="Enter Last Name" type="text" autocomplete="off" value="">
                                        </div>
                                    </div>

                                    <!-- Email -->
                                    <div class="form-group mb-4">
                                        <div class="input-group input-group-merge input-group-alternative">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fa-solid fa-envelope fa-2x "></i></span>
                                            </div>
                                            <input class="form-control" name="email" id="email" placeholder="Enter Email" type="text" autocomplete="off" value="">
                                        </div>
                                    </div>
                                

                                    <!-- Username -->   
                                    <div class="form-group mb-4">
                                        <div class="input-group input-group-merge input-group-alternative">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fa-solid fa-user fa-2x "></i></span>
                                            </div>
                                            <input class="form-control" name="username" id="username" placeholder="Enter Username" type="text" autocomplete="off" value="">
                                        </div>
                                    </div>
                                

                                    <!-- Password -->
                                    <div class="form-group mb-4">
                                        <div class="input-group input-group-merge input-group-alternative">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fa-solid fa-lock fa-2x "></i></span>
                                            </div>
                                            <input class="form-control" name="password" id="password" placeholder="Enter Password" type="password" autocomplete="off" value="">
                                        </div>
                                    </div>


                                    <!-- Group -->
                                    <div class="form-group mb-4">
                                        <div class="input-group input-group-merge input-group-alternative">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fa-solid fa-users fa-2x "></i></span>
                                            </div>
                                            <select name="group" class="form-control" id="group">
                                            <option value="">Pilih..</option>
                                            {% for group in groups %}
                                                <option value="{{group.groupid}}">{{group.groupid}}</option>
                                            {% endfor %}
                                        </select>
                                        </div>
                                    </div>
                                
                                    <br>
                                    <div class="float-start">
                                            <button type="button" class="btn btn-secondary " data-bs-dismiss="modal">Close</button>
                                        </div>
                                        <div class="float-end">
                                            <button type="submit" class="btn btn-primary " id="addButtonUser">Insert</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
        </div>
        </div>
        <!-- end modalbox tambah Container -->

        <!-- modalbox tambah Virtual Machine -->
        <div class="modal fade" id="addVirtualMachine" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="card bg-white border-0 mb-0">
                            <div class="card-header bg-transparent">
                                <h2 class="card-heading text-center">Add Virtual Machine</h2>
                            </div>
                            <div class="card-body">
                                <form action="/adduser" id="addFormUser" method="post">
                                    {% csrf_token %}

                                    <!-- First Name-->
                                    <div class="form-group mb-4">
                                        <div class="input-group input-group-merge input-group-alternative">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fa-solid fa-id-card fa-2x "></i></span>
                                            </div>
                                            <input class="form-control" name="firstname" id="firstname" placeholder="Enter First Name" type="text" autocomplete="off" value="">
                                        </div>
                                    </div>

                                    <!-- Last Name-->
                                    <div class="form-group mb-4">
                                        <div class="input-group input-group-merge input-group-alternative">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fa-solid fa-id-card fa-2x "></i></span>
                                            </div>
                                            <input class="form-control" name="lastname" id="lastname" placeholder="Enter Last Name" type="text" autocomplete="off" value="">
                                        </div>
                                    </div>

                                    <!-- Email -->
                                    <div class="form-group mb-4">
                                        <div class="input-group input-group-merge input-group-alternative">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fa-solid fa-envelope fa-2x "></i></span>
                                            </div>
                                            <input class="form-control" name="email" id="email" placeholder="Enter Email" type="text" autocomplete="off" value="">
                                        </div>
                                    </div>
                                

                                    <!-- Username -->   
                                    <div class="form-group mb-4">
                                        <div class="input-group input-group-merge input-group-alternative">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fa-solid fa-user fa-2x "></i></span>
                                            </div>
                                            <input class="form-control" name="username" id="username" placeholder="Enter Username" type="text" autocomplete="off" value="">
                                        </div>
                                    </div>
                                

                                    <!-- Password -->
                                    <div class="form-group mb-4">
                                        <div class="input-group input-group-merge input-group-alternative">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fa-solid fa-lock fa-2x "></i></span>
                                            </div>
                                            <input class="form-control" name="password" id="password" placeholder="Enter Password" type="password" autocomplete="off" value="">
                                        </div>
                                    </div>


                                    <!-- Group -->
                                    <div class="form-group mb-4">
                                        <div class="input-group input-group-merge input-group-alternative">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text"><i class="fa-solid fa-users fa-2x "></i></span>
                                            </div>
                                            <select name="group" class="form-control" id="group">
                                            <option value="">Pilih..</option>
                                            {% for group in groups %}
                                                <option value="{{group.groupid}}">{{group.groupid}}</option>
                                            {% endfor %}
                                        </select>
                                        </div>
                                    </div>
                                
                                    <br>
                                    <div class="float-start">
                                            <button type="button" class="btn btn-secondary " data-bs-dismiss="modal">Close</button>
                                        </div>
                                        <div class="float-end">
                                            <button type="submit" class="btn btn-primary " id="addButtonUser">Insert</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
        </div>
        </div>
        <!-- end modalbox tambah Virtual Machine-->



        <!-- sweetalert2 -->
        <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
        <script src="{% static 'plugins/sweetalert2/sweetalert2.all.min.js' %}"></script>
        <script src="{% static 'plugins/sweetalert2/myscript.js' %}"></script>



<!-- end konten -->
{% endblock content %}